{"version":3,"sources":["./src/app/home/home.page.html","./src/app/home/home-routing.module.ts","./src/app/home/home.module.ts","./src/app/home/home.page.scss","./src/app/home/home.page.ts"],"names":[],"mappings":"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","file":"home-home-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title style=\\\"text-align: center;\\\">\\n      Dyfo Bluetooth Lock System\\n    </ion-title>\\n    \\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n<ion-button expand=\\\"full\\\" (click)=\\\"scan()\\\" slot=\\\"end\\\">\\n  <ion-icon name=\\\"Bluetooth\\\"></ion-icon>\\n  <p>Scan</p>\\n</ion-button>\\n\\n\\n  <ion-list> \\n   \\n    <ion-button *ngFor=\\\"let device of devices\\\" (click)=\\\"deviceSelected(device)\\\">\\n      <h2>{{device.name || 'Unnamed' }}fghhg</h2>\\n      <p>{{device.id}}</p>\\n      <p>RSSI: {{device.rssi}}</p>\\n    </ion-button>\\n  </ion-list>\\n\\n  <ion-item>\\n    <ion-label>Lock/UnLock</ion-label>\\n    <ion-toggle [(ngModel)]=\\\"lockvalue\\\"  (ionChange)=\\\"onLockClick($event);\\\"></ion-toggle>\\n  </ion-item>\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-toolbar style=\\\"text-align: center;\\\">\\n    <p>{{ statusMessage }}</p>\\n  </ion-toolbar>\\n</ion-footer>\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MifQ== */\";","import { Component, NgZone } from '@angular/core';\nimport { BLE } from '@ionic-native/ble/ngx';\nimport { ToastController, NavParams, AlertController } from '@ionic/angular';\n\n\n\nconst LIGHTBULB_SERVICE = 'ff10';\nconst SWITCH_CHARACTERISTIC = 'ff11';\nconst DIMMER_CHARACTERISTIC = 'ff12';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n  devices: any[] = [];\n  devicevl;\n  statusMessage: string;\n\n  peripheral: any = {};\n  lockvalue: boolean;\n  \n  constructor(private ble: BLE,\n             private ngZone: NgZone,              \n             private toastCtrl: ToastController,\n             private alertCtrl: AlertController\n             ) {}\n\n             ionViewDidEnter(){\n               console.log('ionviewDidEnter');\n               this.scan();\n             }\n             scan(){\n              this.setStatus('Scanning for Bluetooth LE Devices...');\n              this.devices = [];  // clear list\n              this.ble.scan([LIGHTBULB_SERVICE],5).subscribe(\n                device => this.onDeviceDiscovered(device), \n                error => this.scanError(error.error)\n              );\n              setTimeout(this.setStatus.bind(this), 5000, 'Scan complete');\n             }\n\n             onDeviceDiscovered(device) {\n              console.log('Discovered ' + JSON.stringify(device, null, 2));\n              this.ngZone.run(() => {\n                this.devices.push(device);\n              });\n            }\n\n            // If location permission is denied, you'll end up here\n async scanError(error) {\n    this.setStatus('Error ' + error);\n    let toast =await this.toastCtrl.create({\n      message: 'Error scanning for Bluetooth low energy devices',\n      position: 'middle',\n      duration: 5000\n    });\n    toast.present();\n  }\n  deviceSelected(device) {\n    this.devicevl=device;\n    console.log(JSON.stringify(this.devicevl) + ' selected');\n    console.log(\"getdevice detailsafterclickbt:\"+ JSON.stringify(this.devicevl))\n   \n    this.setStatus('Connecting to ' + device.name || device.id);\n    this.ble.connect(device.id).subscribe(\n      peripheral => this.onConnected(peripheral),\n      peripheral => this.showAlert('Disconnected', 'The peripheral unexpectedly disconnected')\n    );\n  }\n  onConnected(peripheral) {\n\n    this.peripheral = peripheral;\n    this.setStatus('Connected to ' + (peripheral.name || peripheral.id));\n\n    // Update the UI with the current state of the switch characteristic\n    this.ble.read(this.peripheral.id, LIGHTBULB_SERVICE, SWITCH_CHARACTERISTIC).then(\n      buffer => {\n        let data = new Uint8Array(buffer);\n        console.log('switch characteristic ' + data[0]);\n        this.ngZone.run(() => {\n            this.lockvalue = data[0] !== 0;\n        });\n      }\n    )    \n  }\n\n  onLockClick(event) {\n    console.log('onlockvalueSwitchChange');\n    let value = this.lockvalue ? 1 : 0;\n    let buffer = new Uint8Array([value]).buffer;\n    console.log('lockvalue Switch Property ' + this.lockvalue);\n    console.log(buffer)\n    this.ble.write(this.peripheral.id, LIGHTBULB_SERVICE, SWITCH_CHARACTERISTIC, buffer).then(\n      () => this.setStatus('Light is ' + (this.lockvalue ? 'on' : 'off')),\n      e => this.showAlert('Unexpected Error', 'Error updating lockvalue switch')\n    );\n  }\n\n  setStatus(message) {\n    console.log(message);\n    this.ngZone.run(() => {\n      this.statusMessage = message;\n    });\n  }\n\n async showAlert(title, message) {\n    let alert = await this.alertCtrl.create({\n      header: title,\n      message: message,\n      buttons: ['OK']\n    });\n    alert.present();\n  }\n\n}\n"],"sourceRoot":"webpack:///"}